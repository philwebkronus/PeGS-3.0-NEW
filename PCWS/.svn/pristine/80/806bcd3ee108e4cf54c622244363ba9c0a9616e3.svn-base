<?php

class AccountsModel extends CFormModel
{
    CONST GET_TERMINAL_STATE = 81;
    CONST UPDATE_TERMINAL_STATE = 82;
    CONST VALIDATE_MEMBERSHIP_CARD = 83;
    CONST GET_MEMBERSHIP_PROFILE = 84;
    CONST ASSIGN_PIN = 85;
    
    
    public $connection;
    
    public function __construct() 
    {
        $this->connection = Yii::app()->db;
    }
    
    public function getAIDBySiteID($siteID)
    {
        $sql = "SELECT a.AID FROM accounts a INNER JOIN siteaccounts sa ON sa.AID = a.AID WHERE sa.SiteID = :siteID AND a.AccountTypeID = 17;";
        $command = $this->connection->createCommand($sql);
        $command->bindValue(":siteID", $siteID);
        $result = $command->queryRow();
        
        return $result;
    }
    
    
}
?>
